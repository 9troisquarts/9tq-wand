"use strict";(self.webpackChunk_9troisquarts_wand=self.webpackChunk_9troisquarts_wand||[]).push([[695],{18909:function(zt,ln,c){c.r(ln),c.d(ln,{AutoLink:function(){return Ue},CSVNotice:function(){return Pn},ContextMenu:function(){return He},ExcelsiorImportModal:function(){return At},ModelDefinition:function(){return kn},NtqToolbar:function(){return rt},NtqToolbarProvider:function(){return Ge},capitalize:function(){return $n},castAttributesFromDefinition:function(){return fn},memoOnlyForKeys:function(){return ee},nl2br:function(){return W},useI18n:function(){return dt}});var On=c(56690),K=c.n(On),Dn=c(89728),J=c.n(Dn),Rn=c(38416),Q=c.n(Rn),wn=c(62620),Fn=c.n(wn),Vn=c(13218),Yn=c.n(Vn),Wn=c(57557),cn=c.n(Wn),Hn=c(1469),k=c.n(Hn),Xn=c(14293),q=c.n(Xn),Bn=c(30381),dn=c.n(Bn),w=function(e){return parseFloat(e.toString().replace(/\,/g,"."))},Gn={skipUndefinedKeys:!0},Kn=function(e,n){switch(e){case"Float":return w(n);case"Integer":return parseInt(n,10);case"String":return typeof n=="string"?n:n.toString();case"Date":return dn().isMoment(n)?n.format("YYYY-MM-DD"):n;case"Datetime":return dn().isMoment(n)?n.format():n;case"Password":case"Files":case"File":return n||void 0;default:return n}},un=function(e,n){var a,o,t,u,s;switch(e){case"Location":return{location:{formattedAddress:(n==null||(a=n.location)===null||a===void 0?void 0:a.formattedAddress)||(n==null?void 0:n.formattedAddress),lat:n!=null&&(o=n.location)!==null&&o!==void 0&&o.lat||n!=null&&n.lat?w(((t=n.location)===null||t===void 0?void 0:t.lat)||(n==null?void 0:n.lat)):void 0,lng:n!=null&&(u=n.location)!==null&&u!==void 0&&u.lng||n!=null&&n.lat?w(((s=n.location)===null||s===void 0?void 0:s.lng)||(n==null?void 0:n.lng)):void 0},proximity:n.proximity?parseInt(n.proximity,10):void 0};case"Float":return w(n);case"Integer":return parseInt(n,10);case"String":return typeof n=="string"?n:n.toString();case"Datetime":case"Date":return moment.isMoment(n)?n:moment(n);default:return n}},Tt=function(e,n){var a={};return forIn(e,function(o,t){Array.isArray(o)&&!isNil(n[t])?a[t]=n[t].map(function(u){return un(o[0],u)}):isNil(n[t])||(a[t]=un(o,n[t]))}),a};function $(d,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gn,a={};return Fn()(d,function(o,t){if(Yn()(o)){if(o.type==="Places"){var u,s,v,f,p,l,m,g,j,i,N,C,b,A,S,h,y,z,M,L;if(a[((u=o.options)===null||u===void 0?void 0:u.formattedAddress)||t]=(s=e[t])===null||s===void 0?void 0:s.formattedAddress,a[((v=o.options)===null||v===void 0?void 0:v.city)||"city"]=(f=e[t])===null||f===void 0?void 0:f.city,a[((p=o.options)===null||p===void 0?void 0:p.lat)||"lat"]=(l=e[t])===null||l===void 0?void 0:l.lat,a[((m=o.options)===null||m===void 0?void 0:m.lng)||"lng"]=(g=e[t])===null||g===void 0?void 0:g.lng,(j=o.options)!==null&&j!==void 0&&j.countryIso&&(a[((i=o.options)===null||i===void 0?void 0:i.countryIso)||"countryIso"]=(N=e[t])===null||N===void 0?void 0:N.countryIso),(C=o.options)!==null&&C!==void 0&&C.country&&(a[((b=o.options)===null||b===void 0?void 0:b.country)||"country"]=(A=e[t])===null||A===void 0?void 0:A.country),(S=o.options)!==null&&S!==void 0&&S.administrativeLevelOne&&(a[o.options.administrativeLevelOne]=(h=e[t])===null||h===void 0||(y=h.administrativeAreaLevels)===null||y===void 0||(z=y.find(function(O){return O.types.includes("administrative_area_level_1")}))===null||z===void 0?void 0:z.long_name),(M=o.options)!==null&&M!==void 0&&M.administrativeLevelTwo){var E,B,an;a[o.options.administrativeLevelTwo]=(E=e[t])===null||E===void 0||(B=E.administrativeAreaLevels)===null||B===void 0||(an=B.find(function(O){return O.types.includes("administrative_area_level_2")}))===null||an===void 0?void 0:an.long_name}if((L=o.options)!==null&&L!==void 0&&L.zipCode){var sn;a[o.options.zipCode]=(sn=e[t])===null||sn===void 0?void 0:sn.zipCode}}else if(k()(o)&&!q()(e[t]))a[t]=e[t].map(function(O){return Kn(o[0],O)});else if(!q()(e[t])){var G=e[t];G&&(a["".concat(t,"Attributes")]=k()(G)?G.map(function(O){return $(o,O)}):$(o,G))}}else if(q()(e[t]))o!=="password"&&o!=="nested"&&o!=="id"&&(!n.skipUndefinedKeys||e.hasOwnProperty(t))&&(a[t]=null);else switch(o.toLowerCase()){case"float":a[t]=w(e[t]);break;case"integer":a[t]=parseInt(e[t],10);break;case"string":a[t]=typeof e[t]=="string"?e[t]:e[t].toString();break;case"date":a[t]=typeof e[t]!="string"?e[t].format("YYYY-MM-DD"):e[t];break;case"datetime":a[t]=typeof e[t]!="string"?e[t].format():e[t];break;case"password":case"files":case"file":e[t]&&(a[t]=e[t]);break;case"nested":e[t]&&(a["".concat(t,"Attributes")]=k()(e[t])?e[t].map(function(O){return cn()(O,["__typename"])}):cn()(e[t],["__typename"]));break;default:a[t]=e[t];break}}),a}var fn=$,Jn={skipUndefinedKeys:!0},Qn=function(){function d(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jn;K()(this,d),Q()(this,"definition",void 0),Q()(this,"options",void 0),this.definition=e,this.options=n}return J()(d,[{key:"parse",value:function(n){return fn(this.definition,n,this.options)}}]),d}(),kn=Qn,qn=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},$n=qn,_n=c(96486),ne=function(e){return function(n,a){return!e.some(function(o){return!(0,_n.isEqual)(n[o],a[o])})}},ee=ne,x=c(67294),te=c(92742),re=c.n(te),r=c(85893),oe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(typeof e!="string"||!e.includes(`
`))return e;var a=e.split(`
`).filter(function(o){return re()(o).length>0});return a.map(function(o,t){return(0,r.jsxs)(x.Fragment,{children:[o,(t<a.length-1||n)&&(0,r.jsx)("br",{})]},"line".concat(t))})},W=oe,ie=c(61655),ae=c.n(ie),se=c(26389),le=c.n(se),ce=c(27424),T=c.n(ce),de=/^[A-Za-z][-.+A-Za-z0-9]+:/,ue=/^[A-Za-z][-.+A-Za-z0-9]+:\/\//,fe=/:[^\s]*?[A-Za-z]/,me=/^[\w]\/\//;function ve(d,e,n){return!(e&&!pe(e)||ge(d,e)||he(d,e)||xe(n))}function pe(d){var e=d.match(de)[0].toLowerCase();return e!=="javascript:"&&e!=="vbscript:"}function ge(d,e){return!!d&&(!e||!ue.test(e))&&d.indexOf(".")===-1}function he(d,e){return d&&e?!fe.test(d):!1}function xe(d){return!!d&&me.test(d)}var je=/^(https?:\/\/)?(www\.)?/i,Ie=/^mailto:/,Ce=/^\/\//,ye=function(){function d(e,n,a,o,t,u){K()(this,d),this._url=e,this._protocolMailtoMatch=n,this._protocolUrlMatch=a,this._protocolRelativeMatch=o,this.position=t,this.disableUrlStripping=u,this.protocolPrepended=!1}return J()(d,[{key:"getUrl",value:function(){var n=this._url;return!this._protocolMailtoMatch&&!this._protocolRelativeMatch&&!this._protocolUrlMatch&&!this.protocolPrepended&&(n=this._url="http://"+n,this.protocolPrepended=!0),n}},{key:"getAnchorHref",value:function(){var n=this.getUrl();return n.replace(/&amp;/g,"&")}},{key:"getAnchorText",value:function(){var n=this.getUrl();return this.disableUrlStripping||(this._protocolRelativeMatch&&(n=this.stripProtocolRelativePrefix(n)),this._protocolMailtoMatch&&(n=this.stripMailtoPrefix(n)),n=this.stripUrlPrefix(n),n=this.removeTrailingSlash(n)),n}},{key:"stripUrlPrefix",value:function(n){return n.replace(je,"")}},{key:"stripMailtoPrefix",value:function(n){return n.replace(Ie,"")}},{key:"stripProtocolRelativePrefix",value:function(n){return n.replace(Ce,"")}},{key:"removeTrailingSlash",value:function(n){return n.charAt(n.length-1)==="/"&&(n=n.slice(0,-1)),n}}]),d}(),mn=/(?:[A-Za-z][-.+A-Za-z0-9]+:(?![A-Za-z][-.+A-Za-z0-9]+:\/\/)(?!\d+\/?)(?:\/\/)?)/,Ne=/(?:www\.)/,_=/[A-Za-z0-9.-]*[A-Za-z0-9-]/,Se=/(?:(?:[^<>()\\[\]\\.,;:\s@"]+(?:\.[^<>()\\[\]\\.,;:\s@"]+)*)|(?:".+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(?:(?:[a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,Ze=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,be=/[-A-Za-z0-9+&@#/%=~_()|'$*[\]?!:,.;]*[-A-Za-z0-9+&@#/%=~_()|'$*[\]]/,Me=/^(.)?\/\//,Ae=["(?:","(",mn.source,Se.source,")","|","(",mn.source,_.source,")","|","(?:","(.?//)?",Ne.source,_.source,")","|","(?:","(.?//)?",_.source,Ze.source,")",")","(?:"+be.source+")?"].join("");function ze(d){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=new RegExp(Ae,"gi"),a=[],o;(o=n.exec(d))!==null;){var t=o,u=T()(t,5),s=u[0],v=u[1],f=u[2],p=u[3],l=u[4],m=p||l;if(m){var g=m.match(Me)[1]||"";g&&(s=s.slice(1),o.index++)}if(ve(s,f,m)){var j={start:o.index,end:n.lastIndex};a.push(new ye(s,v,f,m,j,e))}}return a}var Te=function(d){ae()(n,d);var e=le()(n);function n(){return K()(this,n),e.apply(this,arguments)}return J()(n,[{key:"prepareElements",value:function(o,t){var u=this,s=[],v=0;return o.forEach(function(f){f.position.start!==0&&s.push(x.createElement("span",{},W(t.slice(v,f.position.start),!0))),s.push(x.createElement("a",Object.assign({},{href:f.getAnchorHref()},u.props.linkProps),W(f.getAnchorText(),!0))),v=f.position.end}),v<t.length&&s.push(x.createElement("span",{},W(t.slice(v),!0))),s}},{key:"truncate",value:function(o){var t=this;if(!this.props.maxLength)return o;var u=[],s=0;return o.some(function(v){if(s+=v.props.children.length,s>t.props.maxLength){var f=v.props.children.slice(0,-(s-t.props.maxLength));return u.push(x.cloneElement(v,{},f)),!0}u.push(v)}),u}},{key:"keyElements",value:function(o){return o.map(function(t,u){return x.cloneElement(t,{key:u})})}},{key:"render",value:function(){var o=this.props.text||"",t=this.keyElements(this.truncate(this.prepareElements(ze(o,this.props.disableUrlStripping),o)));return x.createElement("span",{},t)}}]),n}(x.Component),Ue=Te,Le=c(42122),I=c.n(Le),Pe=c(70215),vn=c.n(Pe),Ee=c(59400),D=c.n(Ee),pn=c(30294),Oe=Object.defineProperty,gn=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,hn=(d,e,n)=>e in d?Oe(d,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[e]=n,we=(d,e)=>{for(var n in e||(e={}))De.call(e,n)&&hn(d,n,e[n]);if(gn)for(var n of gn(e))Re.call(e,n)&&hn(d,n,e[n]);return d};const Ut=d=>React.createElement("svg",we({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 512"},d),React.createElement("path",{d:"M64 360c30.9 0 56 25.1 56 56s-25.1 56-56 56-56-25.1-56-56 25.1-56 56-56zm0-160c30.9 0 56 25.1 56 56s-25.1 56-56 56-56-25.1-56-56 25.1-56 56-56zm56-104c0 30.9-25.1 56-56 56S8 126.9 8 96s25.1-56 56-56 56 25.1 56 56z"}));var Fe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjggNTEyIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuMi4xIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIyIEZvbnRpY29ucywgSW5jLi0tPjxwYXRoIGQ9Ik02NCAzNjBjMzAuOSAwIDU2IDI1LjEgNTYgNTZzLTI1LjEgNTYtNTYgNTYtNTYtMjUuMS01Ni01NiAyNS4xLTU2IDU2LTU2em0wLTE2MGMzMC45IDAgNTYgMjUuMSA1NiA1NnMtMjUuMSA1Ni01NiA1Ni01Ni0yNS4xLTU2LTU2IDI1LjEtNTYgNTYtNTZ6bTU2LTEwNGMwIDMwLjktMjUuMSA1Ni01NiA1NlM4IDEyNi45IDggOTZzMjUuMS01NiA1Ni01NiA1NiAyNS4xIDU2IDU2eiIvPjwvc3ZnPg==",F=c(18872),Ve=["size","className"],xn,jn,In,Ye=(0,F.iv)(xn||(xn=D()([`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background-color: transparent;
  padding: 5px;
  transition: all 0.1s linear;
  &:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`]))),Cn={default:"35",small:"25"},We=function(e){var n=e.size,a=n===void 0?"default":n,o=e.className,t=o===void 0?"":o,u=vn()(e,Ve),s=typeof a=="number"?"".concat(a,"px"):"".concat(Cn[a]||Cn.default,"px");return(0,r.jsx)(pn.Z,I()(I()({className:"".concat(t," wand-dropdown-menu"),trigger:["click"]},u),{},{children:(0,r.jsx)("span",{className:"".concat(Ye," ").concat((0,F.iv)(jn||(jn=D()([`
          height: `,`;
          width: `,`;
          border-radius: `,`;
        `])),s,s,s)," wand-context-menu-handler"),children:(0,r.jsx)("img",{className:`
          `.concat((0,F.iv)(In||(In=D()([`
            width: 4px;
          `]))),`
        `),src:Fe})})}))},He=We,nn=c(72683),Xe=c(65885),H=(0,x.createContext)(null),en={i18n:{debug:!1,preventDefault:!1}},Be=function(e){var n=e.enabled,a=n===void 0?!0:n,o=e.impersonation,t=o===void 0?!1:o,u=e.baseUrl,s=u===void 0?"/ntq_tools":u,v=(0,Xe.Z)("ntq-toolbar-config",en),f=T()(v,2),p=f[0],l=f[1],m=function(i,N){return l(I()(I()(I()({},en),p||{}),{},{i18n:I()(I()({},(p||{}).i18n||{}),{},Q()({},i,N))}))},g=I()(I()(I()({},en),p||{}),{},{onI18nConfigChange:m,impersonation:t,baseUrl:s});return a?(0,r.jsx)(H.Provider,{value:g,children:e.children}):e.children},Ge=Be,R=c(26713),Z={switch:"un701VxxH7QOoCJ8TkOj","ant-switch-checked":"YsUnohMotq4ZUgIPgRRj",tag:"DaKehT1yfgv44VV_APp8",pill:"SbcaIkXpI2wkyMlTr7Yf",enabled:"WdVoI0O0EtsEiuCGsZHx",disabled:"Szti7exhmg68DHdKnyw4",impersonationPopover:"VEprbR4o2o4OWRUNZa0q",popoverContent:"U3NidYOJcestZM0OiHC3",popoverLoading:"egeTzFsBQiI966OAVW4d",impersonationModelName:"f3jtA5j028D4ROm9ZeqU",user:"r7CXMc7AoWkcgIclJORc",padded:"Qdbi2O787U3qivoMbytV",userGroup:"t9pH0AqaMogt5R8nYd9h"},Ke=c.p+"static/logo.457bc401.png",V=c(11382),Je=c(25968),yn=c(6226),Nn=c(10808),Qe={headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}},ke=function(e){var n=(0,x.useContext)(H),a=(0,x.useState)(!1),o=T()(a,2),t=o[0],u=o[1],s=(0,x.useState)(!1),v=T()(s,2),f=v[0],p=v[1],l=(0,x.useState)(),m=T()(l,2),g=m[0],j=m[1],i=function(h){h?(u(!0),g?u(!0):(p(!0),fetch("".concat(n.baseUrl,"/impersonation/users.json"),I()({},Qe)).then(function(y){return y.json()}).then(function(y){var z=y.data;j(z),p(!1)}).catch(function(){p(!1)}))):u(!1)},N=function(h,y){window.location.href="".concat(n.baseUrl,"/impersonation/").concat(h,"/").concat(y.id,"/sign_in")},C=Object.keys(g||{}).filter(function(S){var h;return!(n!=null&&(h=n.impersonation)!==null&&h!==void 0&&h.userTypes)||n.impersonation.userTypes.includes(S)}),b=C.length>0,A=(0,r.jsxs)(r.Fragment,{children:[f&&(0,r.jsx)("div",{className:Z.popoverLoading,children:(0,r.jsx)(V.Z,{})}),!f&&g&&(0,r.jsx)("div",{className:Z.popoverContent,children:C.map(function(S){return(0,r.jsxs)(Je.Z,{className:Z.userGroup,children:[b&&(0,r.jsx)(yn.Z,{className:Z.impersonationModelName,span:24,children:S}),g[S].map(function(h){return(0,r.jsx)(yn.Z,{className:"".concat(Z.user," ").concat(b?Z.padded:""),span:24,onClick:function(){return N(S,h)},children:h.label},h.id)})]},S)})})]});return(0,r.jsx)(Nn.Z,{trigger:["click"],open:t,content:A,onOpenChange:i,placement:"bottom",arrowPointAtCenter:!0,children:(0,r.jsx)("span",{className:Z.tag,children:"Connexion utilisateur"})})},qe=ke,Sn,Zn,bn,Mn,$e=nn.Z.div(Sn||(Sn=D()([`
  position: fixed;
  top: 0;
  background-color: #000;
  display: flex;
  height: 50px;
  width: 100%;
  color: white;
  padding: 0 16px;
  z-index: 1000;
`]))),_e=nn.Z.div(Zn||(Zn=D()([`
  display: flex;
  margin-left: auto;
  align-items: center;
`]))),nt=nn.Z.div(bn||(bn=D()([`
  display: flex;
  align-items: center;
`]))),An=(0,F.iv)(Mn||(Mn=D()([`
  .ant-layout-header,
  .ant-layout-sider {
    margin-top: 50px;
  }
`]))),et="/ntq_tools",tt=function(e){var n,a,o,t=e.enabled,u=t===void 0?!0:t,s=(0,x.useContext)(H);if(!u)return null;var v=function(){fetch("".concat(et,"/translation/refresh"))};(0,x.useEffect)(function(){if(u)return document.body.classList.add(An),function(){return document.body.classList.remove(An)}});var f=function(m){return function(){return s.onI18nConfigChange(m,s!=null&&s.i18n?!s.i18n[m]:!0)}},p=[{label:(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"".concat(Z.pill," ").concat(s!=null&&(n=s.i18n)!==null&&n!==void 0&&n.debug?Z.enabled:Z.disabled)}),"Live"]}),key:"debug",onClick:function(){var m;return f("debug")(!(s!=null&&(m=s.i18n)!==null&&m!==void 0&&m.debug))}},{label:(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"".concat(Z.pill," ").concat(s!=null&&(a=s.i18n)!==null&&a!==void 0&&a.preventDefault?Z.enabled:Z.disabled)}),"Prevent default"]}),key:"preventDefault",onClick:function(){var m;return f("preventDefault")(!(s!=null&&(m=s.i18n)!==null&&m!==void 0&&m.preventDefault))}},{label:(0,r.jsx)("span",{children:"Refresh translations"}),key:"refresh",onClick:v}];return(0,r.jsxs)($e,{children:[(0,r.jsx)(nt,{children:(0,r.jsx)("img",{src:Ke,width:"30"})}),(0,r.jsx)(_e,{children:(0,r.jsxs)(R.Z,{children:[!!(s!=null&&s.impersonation)&&(0,r.jsx)(qe,{}),(0,r.jsx)(pn.Z,{menu:{items:p},trigger:["hover"],children:(0,r.jsxs)("span",{className:"".concat(Z.tag),onClick:f("debug"),children:[(0,r.jsx)("span",{className:"".concat(Z.pill," ").concat(s!=null&&(o=s.i18n)!==null&&o!==void 0&&o.debug?Z.enabled:Z.disabled)}),"Traduction live"]})})]})})]})},rt=tt,ot=c(84847),tn=c(56264),it=c(68474),P=c(71577),at=["count"],zn,Tn="/ntq_tools",Un={headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}},st=(0,F.iv)(zn||(zn=D()([`
  font-style: italic;
  color: #4527a0;
  text-decoration-line: underline;
  text-decoration-style: dashed;
  &:hover {
    color: #4527a0;
  }
`]))),lt=function(e){var n=e.translationKey,a=e.preventDefault,o=(0,x.useState)(!1),t=T()(o,2),u=t[0],s=t[1],v=(0,x.useState)(e.value),f=T()(v,2),p=f[0],l=f[1],m=(0,x.useState)(!1),g=T()(m,2),j=g[0],i=g[1],N=function(){fetch("".concat(Tn,"/translation"),I()(I()({},Un),{},{method:"PUT",body:JSON.stringify({key:n,value:p})})).then(function(h){return h.json()}).then(function(h){var y=h.data;y&&s(!1)})},C=u?(0,r.jsx)("div",{style:{minWidth:150,minHeight:75},children:j?(0,r.jsx)("div",{style:{height:75,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(V.Z,{})}):(0,r.jsxs)("div",{children:[(0,r.jsx)(it.Z.TextArea,{value:p,onChange:function(h){var y=h.target.value;return l(y)},autoSize:!0}),(0,r.jsx)("div",{style:{marginTop:10,textAlign:"right"},children:(0,r.jsx)(P.Z,{onClick:N,size:"small",type:"primary",children:"Modifier"})})]})}):null,b=function(h){s(h),i(!0),fetch("".concat(Tn,"/translation?key=").concat(n),Un).then(function(y){return y.json()}).then(function(y){var z=y.data;l(z),i(!1)})},A=function(h){a&&h.stopPropagation()};return(0,r.jsx)(Nn.Z,{title:j?null:n,content:C,open:u,trigger:"click",onOpenChange:b,children:(0,r.jsx)("a",{onClick:A,className:st,children:e.value||n})})},ct=function(e){var n=e||{},a=n.debug,o=a===void 0?!1:a,t=(0,x.useContext)(H),u=(0,ot.Z)(),s=function(l){return u.formatMessage({id:l})!==l},v=function(l){var m,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=g.count,i=vn()(g,at),N=l;if(g&&g.count!==void 0){var C="zero";g.count>1?C="other":g.count===1&&(C="one"),N="".concat(l,".").concat(C)}N=(0,tn.decamelize)(N);var b=u.formatMessage({id:N},g);if(o||t!=null&&(m=t.i18n)!==null&&m!==void 0&&m.debug){var A;return(0,r.jsx)(lt,{translationKey:N,value:b,preventDefault:t==null||(A=t.i18n)===null||A===void 0?void 0:A.preventDefault})}return b},f=function(l,m){return v("activerecord.attributes.".concat((0,tn.decamelize)(l),".").concat((0,tn.decamelize)(m)))};return{t:v,translate:v,tAttribute:f,isTranslated:s}},dt=ct,Ln={container:"ux2_qjNZthMeMslgWP2R",item:"k5GBX5RFIiUIq1fasqpb"},ut=function(e){var n=e.header,a=e.values,o=e.description;return(0,r.jsxs)(R.Z,{align:"start",className:"".concat(Ln.item," wand-csv-notice-item"),children:[(0,r.jsx)("code",{children:n}),(0,r.jsxs)("div",{children:[o,a&&a.length>0&&(0,r.jsx)("ul",{children:a.map(function(t){var u=t.value,s=t.description;return(0,r.jsx)("li",{children:(0,r.jsxs)(R.Z,{children:[(0,r.jsx)("strong",{children:u}),s]})},u)})})]})]},n)},ft=function(e){var n=e.schema,a=n===void 0?[]:n;return(0,r.jsx)("div",{className:"".concat(Ln.container," wand-csv-notice-container"),children:(0,r.jsx)(R.Z,{direction:"vertical",style:{width:"100%"},children:a.map(function(o){return(0,r.jsx)(ut,I()({},o),o.header)})})})},Pn=ft,mt=c(33510),vt=c(21),pt=c(77970),U=c(2587),rn=c(38997),gt=c(92434),ht=c(85437),xt=function(e){var n=e.configuration,a=e.importType,o=(0,x.useState)(!1),t=T()(o,2),u=t[0],s=t[1],v=(0,x.useState)(void 0),f=T()(v,2),p=f[0],l=f[1],m=(0,x.useState)(void 0),g=T()(m,2),j=g[0],i=g[1],N=function(M){var L;return M?(L=n.client)===null||L===void 0?void 0:L.get("/".concat(n.rootUrl,"/imports/").concat(M)):new Promise(function(E,B){return E({})})},C=(0,ht.Z)(N,{pollingInterval:3e3,pollingWhenHidden:!0,manual:!0,onSuccess:function(M){M.id&&i(M)}}),b=C.run,A=C.cancel,S=function(M){var L=new FormData;return L.append("file",M,M.name),n.client&&n.client.post("/".concat(n.rootUrl,"/imports/").concat(a),L,{headers:{"Content-Type":"multipart/form-data"}}).then(function(E){return E.id&&(b(E.id),i(E)),!1}),!1};(0,x.useEffect)(function(){n.client&&n.client.get("/".concat(n.rootUrl,"/importers/").concat(a)).then(function(z){l(z)})},[a]),(0,x.useEffect)(function(){["checked","imported"].includes(j==null?void 0:j.state)&&A()},[j==null?void 0:j.state]);var h=function(){i(void 0),s(!1),A()},y=function(){n.client&&(A(),i(I()(I()({},j),{},{state:"importing"})),n.client.put("/".concat(n.rootUrl,"/imports/").concat(j.id),{to_state:"import"}).then(function(M){M.id&&(b(M.id),i(M))}))};return{loading:u,importer:p,importFile:j,onImport:S,onProcessImport:y,onReset:h}},jt=xt,X={descriptions:"MHJ6za7mLjIFQZVdbgb8",label:"JNi1IaAyOABvuOXyeW0z",required:"k7g_8q77vuMd09rEHDBX",checkDescriptions:"cZDwyf6DcWzNZBFNCKwl",actions:"_bu6DPtaXGUWtHz6I2fX",sampleFileLink:"Df9K6V6SyUolWL794UtS"},on=c(84273),It=mt.Z.Dragger,Y={rootUrl:"excelsior"},Ct=function(e){return e?e.state==="pending"||e.state==="buffering"?{status:"progress",icon:(0,r.jsx)(on.Z,{})}:{status:"finish"}:{status:"progress"}},yt=function(e){return e?e.state==="checking"?{status:"progress",icon:(0,r.jsx)(on.Z,{})}:["buffered","checked","importing","imported"].includes(e.state)?{status:"finish"}:{status:"wait"}:{status:"wait"}},Nt=function(e){return e?e.state==="importing"?{status:"progress",icon:(0,r.jsx)(on.Z,{})}:e.state==="imported"?{status:"finish"}:{status:"wait"}:{status:"wait"}},St=function(e){var n,a,o,t,u=e.importType,s=e.onCancel,v=e.onCompleted,f=jt({configuration:Y,importType:u,onCompleted:v}),p=f.importer,l=f.importFile,m=f.onReset,g=f.onImport,j=f.onProcessImport,i=e.translate||Y.translate,N=[I()({title:i?i("excelsior_modal.upload_file"):"Upload file"},Ct(l)),I()({title:i?i("excelsior_modal.verify_file"):"Verify file"},yt(l)),I()({title:i?i("excelsior_modal.import_file"):"Import file"},Nt(l))],C=(0,r.jsx)(vt.Z,{style:{paddingRight:30,marginBottom:16},items:N});if(!l||["buffering","buffered","pending"].includes(l.state))return(0,r.jsxs)(r.Fragment,{children:[C,(0,r.jsx)(V.Z,{delay:200,spinning:["buffering","pending"].includes(l==null?void 0:l.state),tip:i?i("excelsior_modal.uploading_file"):"Uploading...",children:(0,r.jsxs)(R.Z,{direction:"vertical",style:{width:"100%"},children:[(0,r.jsx)(It,{name:"file",showUploadList:!1,multiple:!1,beforeUpload:g,children:(0,r.jsx)("p",{className:"ant-upload-hint",children:i?i("excelsior_modal.upload_format"):"Upload a .xlsx or a .csv file"})}),p&&p.notice&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pt.Z.Title,{style:{marginBottom:0},level:5,children:(0,r.jsxs)(R.Z,{children:[i?i("excelsior_modal.expected_columns"):"Expected cols",p.sample_file&&(0,r.jsx)("a",{className:X.sampleFileLink,href:p.sample_file,target:"_blank",children:i?i("excelsior_modal.download_sample_file"):"Download sample file"})]})}),(0,r.jsx)(Pn,{schema:p.notice})]})]})})]});if(["checking","checked"].includes(l.state))return(0,r.jsxs)(r.Fragment,{children:[C,(0,r.jsxs)(V.Z,{delay:200,spinning:["checking"].includes(l==null?void 0:l.state),tip:i?i("excelsior_modal.checking_file"):"Checking...",children:[(0,r.jsxs)(U.Z,{bordered:!0,className:X.checkDescriptions,size:"small",colon:!1,layout:"vertical",column:4,children:[(0,r.jsx)(U.Z.Item,{span:4,label:i?i("excelsior_modal.number_of_error_lines"):"Error lines count",children:l.state==="checking"?"":l.errors_count.toLocaleString()}),(0,r.jsx)(U.Z.Item,{span:4,label:i?i("excelsior_modal.number_of_success_lines"):"Correct lines count",children:l.state==="checking"?"":l.success_count.toLocaleString()}),(0,r.jsx)(U.Z.Item,{span:2,label:i?i("excelsior_modal.number_of_creation"):"Create",children:l.state==="checking"?"":l.create_count.toLocaleString()}),(0,r.jsx)(U.Z.Item,{span:2,label:i?i("excelsior_modal.number_of_update"):"Update",children:l.state==="checking"?"":l.update_count.toLocaleString()})]}),(0,r.jsx)("div",{className:X.actions,children:(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(P.Z,{onClick:s,type:"text",children:i?i("excelsior_modal.cancel"):"Cancel"}),(0,r.jsx)(P.Z,{onClick:j,type:"primary",children:i?i("excelsior_modal.import"):"Cancel"})]})})]})]});var b=(0,r.jsxs)(U.Z,{bordered:!0,className:X.checkDescriptions,size:"small",colon:!1,layout:"vertical",column:4,children:[(0,r.jsx)(U.Z.Item,{span:4,label:i?i("excelsior_modal.number_of_error_lines"):"Error lines count",children:((n=l.errors_count)===null||n===void 0?void 0:n.toLocaleString())||"0"}),(0,r.jsx)(U.Z.Item,{span:4,label:i?i("excelsior_modal.number_of_success_lines"):"Correct lines count",children:((a=l.success_count)===null||a===void 0?void 0:a.toLocaleString())||"0"}),(0,r.jsx)(U.Z.Item,{span:2,label:i?i("excelsior_modal.number_of_creation"):"Create",children:((o=l.create_count)===null||o===void 0?void 0:o.toLocaleString())||"0"}),(0,r.jsx)(U.Z.Item,{span:2,label:i?i("excelsior_modal.number_of_update"):"Update",children:((t=l.update_count)===null||t===void 0?void 0:t.toLocaleString())||"0"})]});return["importing","imported"].includes(l.state)?(0,r.jsxs)(r.Fragment,{children:[C,(0,r.jsxs)(V.Z,{delay:200,spinning:["importing"].includes(l==null?void 0:l.state),tip:i?i("excelsior_modal.importing_file"):"Importing...",children:[l.state=="imported"&&(0,r.jsx)(rn.ZP,{status:"success",title:i?i("excelsior_modal.file_successfully_imported"):"File successfully importer",extra:[(0,r.jsx)(P.Z,{type:"text",onClick:s,children:i?i("excelsior_modal.finish_and_close"):"Finish and close"},"reset"),(0,r.jsx)(P.Z,{type:"primary",onClick:m,children:i?i("excelsior_modal.new_import"):"New import"},"close")]}),b]})]}):l.state==="error"?l.error_message=="header_not_found"?(0,r.jsx)(rn.ZP,{status:"error",title:i?i("excelsior_modal.missing_header"):"Error",subTitle:(0,r.jsxs)("div",{children:[i?i("excelsior_modal.following_headers_are_missing"):"Error",":\xA0",(l.missing_headers||[]).join(", ")]}),extra:[(0,r.jsx)(P.Z,{type:"text",onClick:s,children:i?i("excelsior_modal.finish_and_close"):"Finish and close"},"reset"),(0,r.jsx)(P.Z,{type:"primary",onClick:m,children:i?i("excelsior_modal.new_import"):"New import"},"close")]}):(0,r.jsxs)(r.Fragment,{children:[C,(0,r.jsx)(rn.ZP,{status:"error",title:i?i("excelsior_modal.error_on_file"):"Error",subTitle:l.error_file?(0,r.jsx)("a",{href:l.error_file,target:"_blank",children:i?i("excelsior_modal.click_here_for_download_error_file"):"Error"}):null,extra:[(0,r.jsx)(P.Z,{type:"text",onClick:s,children:i?i("excelsior_modal.finish_and_close"):"Finish and close"},"reset"),(0,r.jsx)(P.Z,{type:"primary",onClick:m,children:i?i("excelsior_modal.new_import"):"New import"},"close")]})]}):(0,r.jsx)("div",{children:C})},Zt=function(e){var n=e.open,a=e.translate,o=e.onCancel,t=e.title;return n?(0,r.jsx)(gt.Z,{open:!0,width:1e3,footer:!1,title:t,onCancel:o,children:(0,r.jsx)(St,I()({translate:a},e))}):null},bt=function(e){return Y=I()(I()({},Y),e),Y},Mt=Zt,En=Mt;En.configure=bt;var At=En}}]);
